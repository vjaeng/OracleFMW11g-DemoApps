<?xml version="1.0" encoding="UTF-8" ?>
<!-- Generated by Oracle SOA Modeler version 1.0 at [11/19/08 1:53 PM]. -->
<composite name="B2BX12OrderGateway"
           revision="1.0"
           label="2008-11-19_13-53-57_906"
           mode="active"
           state="on"
           xmlns="http://xmlns.oracle.com/sca/1.0"
           xmlns:xs="http://www.w3.org/2001/XMLSchema"
           xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy"
           xmlns:orawsp="http://schemas.oracle.com/ws/2006/01/policy"
           xmlns:ui="http://xmlns.oracle.com/soa/designer/">
  <!-- store front service to create the order -->         
  <import namespace="www.globalcompany.example.com"
          location="oramds:/apps/FusionOrderDemoShared/services/oracle/fodemo/storefront/store/service/common/serviceinterface/StoreFrontService.wsdl"
          importType="wsdl"/>
  <!-- inbound b2b 850 -->        
  <import namespace="http://www.oracle.com/integration/b2b/B2B_po_X12_inbound/"
          location="B2B_po_X12_inbound.wsdl" importType="wsdl"/>
  <!-- outbound b2b 855 -->        
  <import namespace="http://www.oracle.com/integration/b2b/B2B_orderconfirmation_x12/"
          location="B2B_orderconfirmation_x12.wsdl" importType="wsdl"/>
  <!-- order booking to process the order -->        
  <import namespace="http://www.globalcompany.example.com/ns/OrderBookingService"
          location="oramds:/apps/FusionOrderDemoShared/services/orderbooking/OrderBookingProcessor.wsdl" importType="wsdl"/>
  <!-- order events -->        
  <import namespace="/oracle/fodemo/storefront/entities/events/edl/OrderEO"
          location="oramds:/apps/FusionOrderDemoShared/services/oracle/fodemo/storefront/entities/events/OrderEO.edl"
          importType="edl"/> 
  <service name="B2B_po_X12_inbound" ui:wsdlLocation="B2B_po_X12_inbound.wsdl">  
    <interface.wsdl interface="http://www.oracle.com/integration/b2b/B2B_po_X12_inbound/#wsdl.interface(B2B_receive_ptt)"/>
    <binding.b2b docRef="EDI_X12--4010--850--850_Def"/>
  </service>
  <component name="B2BOrderProcessingEngine">
    <implementation.bpel src="B2BOrderProcessingEngine.bpel"/>
    <!-- set to true to use event based communication, false will use conventional invoke/pick messaging -->
    <property name="bpel.config.use.events" many="false" type="xs:string">true</property>
    <property name="configuration.monitorLocation" type="xs:string"
              many="false">B2BOrderProcessingEngine.monitor</property>
    <business-events>
      <subscribe xmlns:sub1="/oracle/fodemo/storefront/entities/events/edl/OrderEO"
                 name="sub1:OrderCompleted" consistency="oneAndOnlyOne"/>
      <publishes xmlns:pub1="/oracle/fodemo/storefront/entities/events/edl/OrderEO"
                 name="pub1:NewOrderSubmitted"/>
    </business-events>
  </component>
  <reference name="StoreFrontService"
             ui:wsdlLocation="oramds:/apps/FusionOrderDemoShared/services/oracle/fodemo/storefront/store/service/common/serviceinterface/StoreFrontService.wsdl">
    <interface.wsdl interface="www.globalcompany.example.com#wsdl.interface(StoreFrontService)"/>
    <binding.ws port="www.globalcompany.example.com#wsdl.endpoint(StoreFrontService/StoreFrontServiceSoapHttpPort)"
                location="oramds:/apps/FusionOrderDemoShared/services/oracle/fodemo/storefront/store/service/common/serviceinterface/StoreFrontService.wsdl"/>
  </reference>
  <reference name="B2B_orderconfirmation_x12"
             ui:wsdlLocation="B2B_orderconfirmation_x12.wsdl">
    <interface.wsdl interface="http://www.oracle.com/integration/b2b/B2B_orderconfirmation_x12/#wsdl.interface(B2B_send_ptt)"/>
    <binding.b2b docRef="EDI_X12--4010--855--855_Def"/>
  </reference>
  <reference name="OrderBookingService"
             ui:wsdlLocation="oramds:/apps/FusionOrderDemoShared/services/orderbooking/OrderBookingProcessor.wsdl">
    <interface.wsdl interface="http://www.globalcompany.example.com/ns/OrderBookingService#wsdl.interface(OrderProcessor)"
                    callbackInterface="http://www.globalcompany.example.com/ns/OrderBookingService#wsdl.interface(OrderProcessorCallback)"/>
    <binding.ws port="http://www.globalcompany.example.com/ns/OrderBookingService#wsdl.endpoint(orderprocessor_client_ep/OrderProcessor_pt)"
                location="oramds:/apps/FusionOrderDemoShared/services/orderbooking/OrderBookingProcessor.wsdl"/>
  </reference>
  <wire>
    <source.uri>B2B_po_X12_inbound</source.uri>
    <target.uri>B2BOrderProcessingEngine/B2B_po_X12_inbound</target.uri>
  </wire>
  <wire>
    <source.uri>B2BOrderProcessingEngine/StoreFrontService</source.uri>
    <target.uri>StoreFrontService</target.uri>
  </wire>
  <wire>
    <source.uri>B2BOrderProcessingEngine/B2B_orderconfirmation_x12</source.uri>
    <target.uri>B2B_orderconfirmation_x12</target.uri>
  </wire>
  <wire>
    <source.uri>B2BOrderProcessingEngine/OrderBookingService</source.uri>
    <target.uri>OrderBookingService</target.uri>
  </wire>
</composite>
